<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>     
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />      
    <title>SimpleStart</title>      
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>    
</head>      
  	<body onload="initMap()"> 
	<div id = "latLongList" class = "list"></div>
	<div id="map" style="width: 700px; height: 500px; border: 1px solid black;"></div>   
	<script type="text/javascript">   
		var entryCounter = 0;
		var markerList = [];
		function initMap()   
		{   
			var coords = new google.maps.LatLng(51.1078852,17.03853760000004);
			var mapOptions = {
			  zoom: 10,
			  center: coords,
			  mapTypeId: google.maps.MapTypeId.ROADMAP,
			  disableDefaultUI: true,
			};
			var map = new google.maps.Map(document.getElementById("map"), mapOptions); 

			google.maps.event.addListener(map, "dblclick", function(event)
			{
				var latidude = event.latLng.lat();
				var longitude = event.latLng.lng();

				addMarker(latidude,longitude);

				var marker = new google.maps.Marker(
				{
					position: {lat: latidude, lng: longitude},
					map: map
				});
				marker.metadata = {id: entryCounter};

				markerList.push(marker);
			});
		}   

		function addMarker(latidude, longitude)
		{
			var entry = '<div id="' + (entryCounter) + '" class = "entry">' +
			'<div>' + entryCounter + '. latitude: ' + latidude + ' longitude: ' + longitude + '</div>' +
	  		'<div> <button onclick="showMarker(this)">Pokaż</button> ' +
	  		'<button onclick="deleteMarker(this)">Usuń</button> ' +
	   		'</div> </div>';
			document.getElementById('latLongList').innerHTML += entry;
			entryCounter++;
		}

		function showMarker(marker)
		{
			var id = marker.parentNode.parentNode.getAttribute('id');
			informationWindow.open(map,markerList[Number(id)]);
		}

		function deleteMarker(marker)
		{
			var id = marker.parentNode.parentNode.getAttribute('id');
			markerList[Number(id)].setMap(null);
			var parent = marker.parentNode.parentNode;
			parent.parentNode.removeChild(parent);
		}
		var informationWindow = new google.maps.InfoWindow(
		{
			content: 'To tu!'
		});
	</script>   

    </body>      
</html>   
